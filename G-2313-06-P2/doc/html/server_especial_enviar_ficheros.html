<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Redes de Comunicaciones II: Enviar ficheros</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-eps.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Redes de Comunicaciones II
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Documentación de la práctica 2 generada por Jorge Parrilla y Javier de Marco.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li class="current"><a href="pages.html"><span>Páginas&#160;relacionadas</span></a></li>
      <li><a href="modules.html"><span>Módulos</span></a></li>
      <li><a href="annotated.html"><span>Clases</span></a></li>
      <li><a href="files.html"><span>Archivos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('server_especial_enviar_ficheros.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Enviar ficheros </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="synopsis_file"></a>
Synopsis</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="G-2313-06-P2__files_8h.html">G-2313-06-P2_files.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> *<a class="code" href="G-2313-06-P2__files_8h.html#ad00af19306b45db3947f1b89ae4b5def">server_especial_enviar_ficheros</a>(<span class="keywordtype">void</span> *vrecv);</div></div><!-- fragment --> <h1><a class="anchor" id="descripcion_file"></a>
Descripción</h1>
<p>Inicia la transferencia de ficheros de un cliente a otro, para ello ejecuta un socket mediante el que se solicita la transferencia. Si el usuario B acepta, se inicia la transferencia del fichero:</p>
<p>Este punto de uno de los más importantes para el cliente ya que nos permite la transferencia de ficheros entre los distintos clientes del canal IRC. Funciona de forma sencilla pero intensa, es decir, se requiere el uso de un socket entre los dos clientes de forma directa ya que como se menciona en el enunciado de la práctica se debe implementar de esta manera para evitar costes excesivos en el servidor. Por ello, cuando un cliente inicia la transferencia de un fichero a otro cliente se crea un socket único para la petición de transferencia del fichero. Supongamos que un usuario A desea enviar un fichero a un usuario B, podemos resumir el protocol de transferencia de ficheros de la siguiente forma: </p><ul>
<li>
1) El usuario A envía la petición de transferencia al usuario B. </li>
<li>
2) El usuario B recibe la petición de transferencia del fichero y responde con una confirmación o rechazo a dicha transferencia. </li>
<li>
3) El usuario A recibe la confirmación/rechazo de la petición de transferecia. </li>
<li>
4) En caso de que se haya confirmado, el usuario A crea un nuevo socket con el usuario B únicamente destinado a la transferencia del fichero. En caso de rechazo, se cierra el socket generado previamente para la confirmación y se da por finalizada la transferencia. </li>
<li>
5) El usuario B recibe los datos del fichero del usuario A. </li>
</ul>
<h1><a class="anchor" id="return_2"></a>
Valores devueltos</h1>
<ul>
<li>
<b>void</b> No devuelve nada </li>
</ul>
<h1><a class="anchor" id="authors_file"></a>
Autores</h1>
<ul>
<li>
Jorge Parrilla Llamas (<a href="#" onclick="location.href='mai'+'lto:'+'jor'+'ge'+'.pa'+'rr'+'ill'+'a@'+'est'+'ud'+'ian'+'te'+'.ua'+'m.'+'es'; return false;">jorge<span style="display: none;">.nosp@m.</span>.par<span style="display: none;">.nosp@m.</span>rilla<span style="display: none;">.nosp@m.</span>@est<span style="display: none;">.nosp@m.</span>udian<span style="display: none;">.nosp@m.</span>te.u<span style="display: none;">.nosp@m.</span>am.es</a>) </li>
<li>
Javier de Marco Tomás (<a href="#" onclick="location.href='mai'+'lto:'+'jav'+'ie'+'r.m'+'ar'+'co@'+'es'+'tud'+'ia'+'nte'+'.u'+'am.'+'es'; return false;">javie<span style="display: none;">.nosp@m.</span>r.ma<span style="display: none;">.nosp@m.</span>rco@e<span style="display: none;">.nosp@m.</span>stud<span style="display: none;">.nosp@m.</span>iante<span style="display: none;">.nosp@m.</span>.uam<span style="display: none;">.nosp@m.</span>.es</a>) </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">P2 - Cliente IRC</a></li>
    <li class="footer">Generado por
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
